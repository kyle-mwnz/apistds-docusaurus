"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5793],{4137:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>d});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=o.createContext({}),c=function(e){var t=o.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},u=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},i="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),i=c(a),m=n,d=i["".concat(s,".").concat(m)]||i[m]||k[m]||r;return a?o.createElement(d,p(p({ref:t},u),{},{components:a})):o.createElement(d,p({ref:t},u))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,p=new Array(r);p[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[i]="string"==typeof e?e:n,p[1]=l;for(var c=2;c<r;c++)p[c]=a[c];return o.createElement.apply(null,p)}return o.createElement.apply(null,a)}m.displayName="MDXCreateElement"},9848:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>k,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var o=a(7462),n=(a(7294),a(4137));const r={},p=void 0,l={unversionedId:"api-design-development/ReturnedContent",id:"api-design-development/ReturnedContent",title:"ReturnedContent",description:"Returned Content",source:"@site/docs/api-design-development/7-ReturnedContent.md",sourceDirName:"api-design-development",slug:"/api-design-development/ReturnedContent",permalink:"/apistds-docusaurus/docs/next/api-design-development/ReturnedContent",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"HTTPHeaders",permalink:"/apistds-docusaurus/docs/next/api-design-development/HTTPHeaders"},next:{title:"Considerationof state",permalink:"/apistds-docusaurus/docs/next/api-design-development/Considerationof state"}},s={},c=[{value:"Returned Content",id:"returned-content",level:2},{value:"Resource Scope",id:"resource-scope",level:3},{value:"Formats",id:"formats",level:3},{value:"Layout",id:"layout",level:3},{value:"JSON Property Names",id:"json-property-names",level:3},{value:"Consistency",id:"consistency",level:3},{value:"Singletons vs. Collections",id:"singletons-vs-collections",level:3},{value:"HATEOAS",id:"hateoas",level:3}],u={toc:c},i="wrapper";function k(e){let{components:t,...a}=e;return(0,n.kt)(i,(0,o.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"returned-content"},"Returned Content"),(0,n.kt)("p",null,"The returned content is the body of the message that the API returns in\nresponse to a request. This usually relates to the resource that was\nrequested."),(0,n.kt)("h3",{id:"resource-scope"},"Resource Scope"),(0,n.kt)("p",null,"The amount of data to return about a resource depends on several\nfactors:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Business context - does all the resource information being returned\nhave relevance to the business process or activity consumers will\nuse it for?")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Payload size and network efficiency - how much information does the\nresource contain, and is it so bulky it could impact network\nperformance?")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Usefulness - is the information in the returned content always\nuseful to the consumer, or is it something they may need once but\nnever again?"))),(0,n.kt)("p",null,"Analysis of the full resource data against these factors should help\ndetermine how much resource data is returned in the response."),(0,n.kt)("h3",{id:"formats"},"Formats"),(0,n.kt)("p",null,'REST responses should be of a format which is both human and machine\nreadable. Even if your initial consumer is via B2B, the API should be\ndesigned, where possible, for all potential consumers. REST APIs should,\nby default, return content in JSON format. But it is good practice to\nsupport multiple message formats (e.g. XML, Multi-part MIME) and allow\nconsuming applications to request the format they wish to consume (in\nline with the \\"Design for the Consumer\\" principle in Part A, section\n4).'),(0,n.kt)("p",null,"The response format required from a GET request must be indicated by the\nconsumer in their request using the Accept header. For example:"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"#GET a resource and specify the response type"),(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/crown-property/0219c539-5885-4ab6-a55b-b0de7537c426"},"https://api.example.govt.nz/crown-property/0219c539-5885-4ab6-a55b-b0de7537c426")),(0,n.kt)("p",{parentName:"blockquote"},"Accept: application/xml"),(0,n.kt)("p",{parentName:"blockquote"},"#Response"),(0,n.kt)("p",{parentName:"blockquote"},'\\<?xml version=\\"1.0\\" encoding=\\"UTF-8\\" ?',">"),(0,n.kt)("p",{parentName:"blockquote"},'\\<CrownProperyResponseBody\nxmlns=\\"',(0,n.kt)("a",{parentName:"p",href:"https://api.example.com/CrownProperyResponse%5C%22%5C%3E"},'https://api.example.com/CrownProperyResponse\\"\\>')),(0,n.kt)("p",{parentName:"blockquote"},"\\<id",">","0219c539-5885-4ab6-a55b-b0de7537c426\\</id",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<category",">","commercial\\</category",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<location",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<streetName",">","Northbound Boulevard\\</streetName",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<town",">","Wellington\\</town",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<postalCode",">","6011\\</postalCode",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<countryCode",">","NZ\\</countryCode",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</location",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<pricing",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<rentFrequency",">","annual\\</rentFrequency",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<currencyCode",">","NZD\\</currencyCode",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<pricePerUnitArea",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<price",">","1000\\</price",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<units",">","squareMetre\\</units",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</pricePerUnitArea",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<transactionType",">","rent\\</transactionType",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</pricing",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<property_type",">","office\\</property_type",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<areas",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<internal",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<minimum",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<value",">","183\\</value",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<units",">","squareMetre\\</units",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</minimum",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<maximum",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<value",">","188\\</value",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<units",">","squareMetre\\</units",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</maximum",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</internal",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</areas",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<detailedDescription",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<text",">","Free text describing the property in some way.\\</text",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</detailedDescription",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<tenancy",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<life_cycle_status",">","tennanted\\</life_cycle_status",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\<nextReviewDate",">","2016-06-01\\</nextReviewDate",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</tenancy",">"),(0,n.kt)("p",{parentName:"blockquote"},"\\</CrownProperyResponseBody",">")),(0,n.kt)("p",null,"The request format for a request containing a request body (POST, PUT,\nPATCH) must be supplied in the Content-Type request header. For example:"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"#PUT (update) a resource"),(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/crown-property"},"https://api.example.govt.nz/crown-property")),(0,n.kt)("p",{parentName:"blockquote"},"Content-Type: application/json"),(0,n.kt)("p",{parentName:"blockquote"},"Accept: application/json"),(0,n.kt)("p",{parentName:"blockquote"},"#Request BODY"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"id\\": \\"0219c539-5885-4ab6-a55b-b0de7537c426\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"category\\": \\"commercial\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"location\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"streetName\\": \\"Northbound Boulevard\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"town\\": \\"Wellington\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"postalCode\\": \\"6011\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"countryCode\\": \\"NZ\\"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},'\\"pricing\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"rentFrequency\\": \\"annual\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"currencyCode\\": \\"NZD\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"pricePerUnitArea\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"price\\": 1000,'),(0,n.kt)("p",{parentName:"blockquote"},'\\"units\\": \\"squareMetre\\"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},'\\"transactionType\\": \\"rent\\"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},'\\"property_type\\": \\"office\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"areas\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"internal\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"minimum\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"value\\": 183,'),(0,n.kt)("p",{parentName:"blockquote"},'\\"units\\": \\"squareMetre\\"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},'\\"maximum\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"value\\": 188,'),(0,n.kt)("p",{parentName:"blockquote"},'\\"units\\": \\"squareMetre\\"'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},'\\"detailedDescription\\": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"text\\": \\"Free text describing the property in some way.\\"'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]",","),(0,n.kt)("p",{parentName:"blockquote"},'\\"tenancy\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"life_cycle_status\\": \\"vacant\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"nextReviewDate\\": \\"2016-07-01\\"'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"}")),(0,n.kt)("p",null,"For a good example of this in action, see the tabbed format options for\npresenting patient information on the FHIR",(0,n.kt)("sup",{parentName:"p",id:"fnref-2"},(0,n.kt)("a",{parentName:"sup",href:"#fn-2",className:"footnote-ref"},"2"))," site."),(0,n.kt)("p",null,"Where JSON format is used in responses, it must conform to the JSON\nStandard\n(",(0,n.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7159"},"[RFC7159]{.underline}"),(0,n.kt)("sup",{parentName:"p",id:"fnref-3"},(0,n.kt)("a",{parentName:"sup",href:"#fn-3",className:"footnote-ref"},"3")),"). In\nline with this standard, textual content should be UTF-8 encoded by\ndefault, and any deviations from this must be limited."),(0,n.kt)("p",null,"It is inadvisable to use APIs for returning binary data such as images\nin the response content; hyperlinks to images are the preferred returned\nresponse. But where images ",(0,n.kt)("em",{parentName:"p"},"are")," returned, ensure that the image\nencoding is MIME, HTTP Multipart."),(0,n.kt)("p",null,"HTML is allowed, but is less flexible for consumer usage (e.g. how can\nit be consumed by a native mobile app?), ties content to presentation\nand loses its benefits when building a single page application. It also\nreduces the ability to filter the content in transit for consumers who\nhave fine grained control on what they can access. However, it may be\nnecessary for some forms of API e.g. APIs with geospatial content."),(0,n.kt)("p",null,"Avoid using bespoke formats in returned content."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"[Recommended]","{.smallcaps}")),(0,n.kt)("p",null,"Returned content format should be JSON by default."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"[Required]","{.smallcaps}")),(0,n.kt)("p",null,"Requests for a specific return format must be defined in the Accept\nheader."),(0,n.kt)("h3",{id:"layout"},"Layout"),(0,n.kt)("p",null,"Responses should be\xa0a JSON object\xa0(not an array) by default. Using an\narray to return results limits the ability to include metadata about\nresults and limits the API\\'s ability to add additional top-level\nproperties in the future.\xa0Don\\'t use unpredictable properties. Parsing a\nJSON response where properties are unpredictable (e.g. derived from\ndata) is difficult, and adds friction for clients."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Example of good layout")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"response_metadata\\": {'),(0,n.kt)("p",{parentName:"blockquote"},'\\"item1\\": \\"value1\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"item2\\": \\"value2\\"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},'\\"responseArray\\": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"name\\": \\"entity1\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"type\\": \\"good\\"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"name\\": \\"entity2\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"type\\": \\"good\\"'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]"),(0,n.kt)("p",{parentName:"blockquote"},"}")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Example of bad layout")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"name\\": \\"entity1\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"type\\": \\"bad\\"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"name\\": \\"entity2\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"type\\": \\"bad\\"'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]")),(0,n.kt)("h3",{id:"json-property-names"},"JSON Property Names"),(0,n.kt)("p",null,"Within content, property names should conform to the following\nguidelines:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Property names should be meaningful names with defined semantics")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Property names must be camel-case ASCII strings")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The first character must be a letter or underscore (","_",")")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Subsequent characters can be a letter, a digit, or underscore")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Reserved JavaScript keywords should be avoided"))),(0,n.kt)("h3",{id:"consistency"},"Consistency"),(0,n.kt)("p",null,"Preserve backwards compatibility with existing consumers of the API by\nreturning expected fields and employing sensible default values for\nmissing fields. Keep consistency of terminology throughout, so that the\nconsumer is not misled. Avoid modifying the semantics of content to new\nmeanings, e.g. don't change a \\'title\\' field from meaning the title of\nthe page, to meaning the prefix for a name to the person's job title."),(0,n.kt)("h3",{id:"singletons-vs-collections"},"Singletons vs. Collections"),(0,n.kt)("p",null,"Some API GET calls will return a single resource item (e.g. GET\n",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers/12345"},"https://api.example.govt.nz/passengers/12345"),") whereas some calls will\nreturn a collection of resource items (e.g.\xa0GET\n",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers"},"https://api.example.govt.nz/passengers"),"), and the handling and error\ntreatment can be different."),(0,n.kt)("p",null,"A single item will generally consist of all the pertinent fundamental\ndetails about the resource, and the GET will return these fundamental\ndetails."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Example")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"#GET a single passenger resource by ID"),(0,n.kt)("p",{parentName:"blockquote"},"GET\xa0",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers/12345"},"https://api.example.govt.nz/passengers/12345")),(0,n.kt)("p",{parentName:"blockquote"},"Accept: application/json,version=1.","*"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"id": 12345,'),(0,n.kt)("p",{parentName:"blockquote"},'"names": {'),(0,n.kt)("p",{parentName:"blockquote"},'"firstName": "John",'),(0,n.kt)("p",{parentName:"blockquote"},'"middleName": "Howard",'),(0,n.kt)("p",{parentName:"blockquote"},'"lastName": "Doe",'),(0,n.kt)("p",{parentName:"blockquote"},'"preferredName": "Howie",'),(0,n.kt)("p",{parentName:"blockquote"},'"title": "Mr"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},'"addresses": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"type": "home",'),(0,n.kt)("p",{parentName:"blockquote"},'"address1": "1 Some Street",'),(0,n.kt)("p",{parentName:"blockquote"},'"address2": "Some Suburb",'),(0,n.kt)("p",{parentName:"blockquote"},'"address3": "Some City",'),(0,n.kt)("p",{parentName:"blockquote"},'"address4": null,'),(0,n.kt)("p",{parentName:"blockquote"},'"country": "New Zealand",'),(0,n.kt)("p",{parentName:"blockquote"},'"postcode": 1111'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"type": "business",'),(0,n.kt)("p",{parentName:"blockquote"},'"address1": "2 Work Street",'),(0,n.kt)("p",{parentName:"blockquote"},'"address2": "Work Suburb",'),(0,n.kt)("p",{parentName:"blockquote"},'"address3": "Work City",'),(0,n.kt)("p",{parentName:"blockquote"},'"address4": null,'),(0,n.kt)("p",{parentName:"blockquote"},'"country": "New Zealand",'),(0,n.kt)("p",{parentName:"blockquote"},'"postcode": 2222'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]"),(0,n.kt)("p",{parentName:"blockquote"},"}")),(0,n.kt)("p",null,"If passenger 12345 did not exist, the HTTP return code would be 404."),(0,n.kt)("p",null,"If a requested sub resource did not exist e.g. addresses for passenger\n54321: GET\xa0",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers/54321/addresses"},"https://api.example.govt.nz/passengers/54321/addresses")," an\nHTTP 404 response would not be valid. The correct response would contain\nan empty array:"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"#GET a single passenger address resource by ID"),(0,n.kt)("p",{parentName:"blockquote"},"GET\xa0",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers/54321/addresses"},"https://api.example.govt.nz/passengers/54321/addresses")),(0,n.kt)("p",{parentName:"blockquote"},"Accept: application/json,version=1.","*"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"id": 54321,'),(0,n.kt)("p",{parentName:"blockquote"},'"addresses": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"type": null,'),(0,n.kt)("p",{parentName:"blockquote"},'"address1": null,'),(0,n.kt)("p",{parentName:"blockquote"},'"address2": null,'),(0,n.kt)("p",{parentName:"blockquote"},'"address3": null,'),(0,n.kt)("p",{parentName:"blockquote"},'"address4": null,'),(0,n.kt)("p",{parentName:"blockquote"},'"country": null,'),(0,n.kt)("p",{parentName:"blockquote"},'"postcode": null'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]"),(0,n.kt)("p",{parentName:"blockquote"},"}")),(0,n.kt)("p",null,"A collection will take the form of an array of the given resources,\nincluding any related metadata. The collection returned should be the\ncomplete set, leaving it to the consumer to reduce the quantity of\ninformation returned by sending filters in the resource request (see\n",(0,n.kt)("a",{parentName:"p",href:"#query-arguments"},"[section 2.5.6, Query Arguments]{.underline}"),").\xa0The\nonly reason the collection should be filtered by the API provider is\nbased on the security context; the API consumer should only gain access\nto what that consumer is allowed to see.\xa0It is advisable to aim for\nconsistent naming of collection resource fields, as this enables\napplication developers to create generic handling of the data from\nacross various resource collections offered by the API. Collection\nresources should not contain binary attachments or other content that\nwill lead to large response payloads."),(0,n.kt)("p",null,"Note that the example below is contrived and it would be rare to expose\na resource collection as large as passengers."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Example")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"#GET a collection of passenger resources"),(0,n.kt)("p",{parentName:"blockquote"},"GET\xa0",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers"},"https://api.example.govt.nz/passengers")),(0,n.kt)("p",{parentName:"blockquote"},"Accept: application/json,version=1.","*"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"passengers": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"id": 12345,'),(0,n.kt)("p",{parentName:"blockquote"},'"names": {'),(0,n.kt)("p",{parentName:"blockquote"},'"firstName": "John",'),(0,n.kt)("p",{parentName:"blockquote"},'"middleName": "Howard",'),(0,n.kt)("p",{parentName:"blockquote"},'"lastName": "Doe",'),(0,n.kt)("p",{parentName:"blockquote"},'"salutation": "Mr John Doe",'),(0,n.kt)("p",{parentName:"blockquote"},'"title": "Mr"'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"id": 98765,'),(0,n.kt)("p",{parentName:"blockquote"},'"names": {'),(0,n.kt)("p",{parentName:"blockquote"},'"firstName": "Mary",'),(0,n.kt)("p",{parentName:"blockquote"},'"middleName": "Pauline",'),(0,n.kt)("p",{parentName:"blockquote"},'"lastName": "Smith",'),(0,n.kt)("p",{parentName:"blockquote"},'"salutation": "Ms Mary Smith",'),(0,n.kt)("p",{parentName:"blockquote"},'"title": "Ms"'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'".....lots more passengers here.....": "..."'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]",","),(0,n.kt)("p",{parentName:"blockquote"},'"',"_",'links": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"rel": "12345",'),(0,n.kt)("p",{parentName:"blockquote"},'"href": "',(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers/12345%22"},'https://api.example.govt.nz/passengers/12345"')),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'"rel": "98765",'),(0,n.kt)("p",{parentName:"blockquote"},'"href": "',(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers/98765%22"},'https://api.example.govt.nz/passengers/98765"')),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'".....lots more links here.....": "..."'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]"),(0,n.kt)("p",{parentName:"blockquote"},"}")),(0,n.kt)("p",null,"If there were no results from a query against a filter, e.g. passengers\nbooked on a specific flight\n(GET\xa0",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/passengers/flights/1234"},"https://api.example.govt.nz/passengers/flights/1234"),"), the return\nvalue would be a 200 response code, because the query is not invalid and\nthere may be such data in the future."),(0,n.kt)("h3",{id:"hateoas"},"HATEOAS"),(0,n.kt)("p",null,"HATEOAS, or Hypermedia as the Engine of Application State, is the\nprinciple of not just returning a response to a request, but also\nreturning links to other useful capabilities. So, if a POST has just\nbeen used to create an item, the response could return links to options\nto update the item, delete the item and view other items of the same\ntype. This makes it possible for UIs which utilise an API to be\nautomatically generated (in terms of hyperlinks) and adaptable to change\n(response content links)."),(0,n.kt)("p",null,"If a web page effectively captures a single state in time, then\nhyperlinks are transitions to other states. The HATEOAS principle\nsuggests that REST should return not only response content (current\nstate) but also links to transitions to other states. This could result\nin thinner clients and fatter APIs, and means UIs need to be built to\nadapt to potential new transitions, but makes it possible to update all\nUIs no matter what platform they sit on (mobile app, web application\netc.)."),(0,n.kt)("p",null,"For example, consider the following representation of a person and\nsequence of requests:"),(0,n.kt)("p",null,"This example assumes that an address is a unique resource in its own\nright and that people are associated with addresses. (This may not\nalways be a practical application and the example is used just to\nillustrate the hypermedia concept.)"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"1. User submits a request for a person record:")),(0,n.kt)("p",null,"#"," Request person details:"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"GET\n",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/people/c70d37cf-3314-4a24-a2c3-0fca7ec0943f"},"https://api.example.govt.nz/people/c70d37cf-3314-4a24-a2c3-0fca7ec0943f")),(0,n.kt)("p",{parentName:"blockquote"},"Host: ",(0,n.kt)("a",{parentName:"p",href:"http://www.example.com"},"www.example.com")),(0,n.kt)("p",{parentName:"blockquote"},"Accept: application/json;q=1.0")),(0,n.kt)("p",null,"#"," Response with person details:"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"HTTP/1.1 200 OK"),(0,n.kt)("p",{parentName:"blockquote"},"Content-Location:\n",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/people/c70d37cf-3314-4a24-a2c3-0fca7ec0943f"},"https://api.example.govt.nz/people/c70d37cf-3314-4a24-a2c3-0fca7ec0943f")),(0,n.kt)("p",{parentName:"blockquote"},"Content-Type: application/json;charset=UTF-8"),(0,n.kt)("p",{parentName:"blockquote"},"Cache-control: max-age=3600,must-revalidate"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"personId\\": \\"d9e1a2f6-6bc9-46af-9dbb-50de7f6eacd5\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"name\\": \\"Joe Bloggs\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"email\\": \\"',(0,n.kt)("a",{parentName:"p",href:"mailto:joe.bloggs@example.com"},"joe.bloggs@example.com"),'\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"addresses\\": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"id\\": \\"5046b8f2-e8aa-4ec9-a597-34d01af0fd32\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"streetNumber\\": \\"12\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"streetName\\": \\"Somewhere Street\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"City\\": \\"Springfield\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"type\\": \\"home\\"'),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"id\\": \\"18a1a85c-3b1e-41b9-909c-668f2a803b69\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"streetNumber\\": \\"1\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"streetName\\": \\"Some Other Street\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"City\\": \\"Springfield\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"type\\": \\"business\\"'),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]",","),(0,n.kt)("p",{parentName:"blockquote"},'\\"',"_",'links\\": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"rel\\": \\"self\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"href\\":\n\\"',(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/people/d9e1a2f6-6bc9-46af-9dbb-50de7f6eacd5%5C%22"},'https://api.example.govt.nz/people/d9e1a2f6-6bc9-46af-9dbb-50de7f6eacd5\\"')),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"rel\\": \\"address1\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"href\\":\n\\"',(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/addresses/046b8f2-e8aa-4ec9-a597-34d01af0fd32%5C%22"},'https://api.example.govt.nz/addresses/046b8f2-e8aa-4ec9-a597-34d01af0fd32\\"')),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"rel\\": \\"address2\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"href\\":\n\\"',(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/addresses/18a1a85c-3b1e-41b9-909c-668f2a803b69%5C%22"},'https://api.example.govt.nz/addresses/18a1a85c-3b1e-41b9-909c-668f2a803b69\\"')),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]"),(0,n.kt)("p",{parentName:"blockquote"},"}")),(0,n.kt)("p",null,"Assume an intermediate proxy were to cache that response as directed by\nthe cache control header."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"2. The user then updates the address details changing the street\nnumber:")),(0,n.kt)("p",null,"#"," Request to update the address details:"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"PUT\n",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/addresses/d9e1a2f6-6bc9-46af-9dbb-50de7f6eacd5"},"https://api.example.govt.nz/addresses/d9e1a2f6-6bc9-46af-9dbb-50de7f6eacd5"),"\nHTTP/1.1"),(0,n.kt)("p",{parentName:"blockquote"},"Host: api.example.govt.nz"),(0,n.kt)("p",{parentName:"blockquote"},"Content-Type: application/json"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"streetNumber\\": \\"12a\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"streetName\\": \\"Somewhere Street\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"City\\": \\"Springfield\\"'),(0,n.kt)("p",{parentName:"blockquote"},"}")),(0,n.kt)("p",null,"#"," Response that the update was successful:"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"HTTP/1.1 204 No Content"),(0,n.kt)("p",{parentName:"blockquote"},"Location:\n",(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/addresses/046b8f2-e8aa-4ec9-a597-34d01af0fd32"},"https://api.example.govt.nz/addresses/046b8f2-e8aa-4ec9-a597-34d01af0fd32"))),(0,n.kt)("p",null,"If the user were now to re-fetch the person details again as per step 1,\nthe representation would contain a stale version of the address (street\nnumber 12 instead of 12a) because the address representation had been\ncached. This caching could occur anywhere along the network path\n(including public internet) between the server and client."),(0,n.kt)("p",null,"Using hypermedia links for related resources improves the visibility of\nthe API and avoids these types of problems. Consider the revised person\nrepresentation below:"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"personId\\": \\"d9e1a2f6-6bc9-46af-9dbb-50de7f6eacd5\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"name\\": \\"JoeBloggs\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"email\\": \\"',(0,n.kt)("a",{parentName:"p",href:"mailto:joe.bloggs@example.com"},"joe.bloggs@example.com"),'\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"addresses\\": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"rel\\": \\"self\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"href\\":\n\\"',(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/addresses/5046b8f2-e8aa-4ec9-a597-34d01af0fd32%5C%22"},'https://api.example.govt.nz/addresses/5046b8f2-e8aa-4ec9-a597-34d01af0fd32\\"')),(0,n.kt)("p",{parentName:"blockquote"},"},"),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"rel\\": \\"self\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"href\\":\n\\"',(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/addresses/18a1a85c-3b1e-41b9-909c-668f2a803b69%5C%22"},'https://api.example.govt.nz/addresses/18a1a85c-3b1e-41b9-909c-668f2a803b69\\"')),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]",","),(0,n.kt)("p",{parentName:"blockquote"},'\\"',"_",'links\\": ',"["),(0,n.kt)("p",{parentName:"blockquote"},"{"),(0,n.kt)("p",{parentName:"blockquote"},'\\"rel\\": \\"self\\",'),(0,n.kt)("p",{parentName:"blockquote"},'\\"href\\":\n\\"',(0,n.kt)("a",{parentName:"p",href:"https://api.example.govt.nz/people/d9e1a2f6-6bc9-46af-9dbb-50de7f6eacd5%5C%22"},'https://api.example.govt.nz/people/d9e1a2f6-6bc9-46af-9dbb-50de7f6eacd5\\"')),(0,n.kt)("p",{parentName:"blockquote"},"}"),(0,n.kt)("p",{parentName:"blockquote"},"]"),(0,n.kt)("p",{parentName:"blockquote"},"}")),(0,n.kt)("p",null,'Using this approach, the embedded object is replaced with a link to the\n"real" object. Although this approach requires a larger number of\nnetwork requests, it avoids the stale data problems and reduces payload\nsize, which is an important consideration for APIs being used by mobile\ndevices or over high latency networks.'))}k.isMDXComponent=!0}}]);